<!DOCTYPE html>
<html lang="en">
<%- include('partials/head') %>
<body class="min-h-screen" x-data x-init="$store.app.init()">

  <!-- Loading overlay -->
  <div x-show="$store.app.isInitializing"
       x-transition:leave="transition ease-in duration-200"
       x-transition:leave-start="opacity-100"
       x-transition:leave-end="opacity-0"
       class="fixed inset-0 bg-white z-50 flex items-center justify-center">
    <div class="text-center">
      <div class="w-8 h-8 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin mx-auto mb-4"></div>
      <p class="text-slate-600">Loading FieldWork...</p>
    </div>
  </div>

  <!-- Main content -->
  <div x-show="!$store.app.isInitializing" x-cloak>

    <!-- Landing Section -->
    <div x-show="$store.app.currentStep === 'landing'">
      <%- include('partials/landing') %>
    </div>

    <!-- Wizard Section -->
    <div x-show="['framework', 'institution', 'employer', 'student', 'synthesizing'].includes($store.app.currentStep)">
      <div class="min-h-screen flex flex-col">
        <%- include('partials/wizard/progress') %>

        <main class="flex-1 py-8">
          <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">

            <!-- Framework Step -->
            <div x-show="$store.app.currentStep === 'framework'" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 translate-y-4" x-transition:enter-end="opacity-100 translate-y-0">
              <%- include('partials/wizard/framework') %>
            </div>

            <!-- Institution Step -->
            <div x-show="$store.app.currentStep === 'institution'" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 translate-y-4" x-transition:enter-end="opacity-100 translate-y-0">
              <%- include('partials/wizard/institution') %>
            </div>

            <!-- Employer Step -->
            <div x-show="$store.app.currentStep === 'employer'" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 translate-y-4" x-transition:enter-end="opacity-100 translate-y-0">
              <%- include('partials/wizard/employer') %>
            </div>

            <!-- Student Step -->
            <div x-show="$store.app.currentStep === 'student'" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 translate-y-4" x-transition:enter-end="opacity-100 translate-y-0">
              <%- include('partials/wizard/student') %>
            </div>

            <!-- Synthesizing Step -->
            <div x-show="$store.app.currentStep === 'synthesizing'" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 translate-y-4" x-transition:enter-end="opacity-100 translate-y-0">
              <%- include('partials/wizard/synthesizing') %>
            </div>

          </div>
        </main>

        <%- include('partials/wizard/navigation') %>
      </div>
    </div>

    <!-- Results Section -->
    <div x-show="$store.app.currentStep === 'results'">
      <%- include('partials/results/header') %>
      <main class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

        <!-- Tab Content -->
        <div x-show="$store.app.resultsActiveTab === 'objectives'" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100">
          <%- include('partials/results/objectives') %>
        </div>

        <div x-show="$store.app.resultsActiveTab === 'curriculum'" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100">
          <%- include('partials/results/curriculum') %>
        </div>

        <div x-show="$store.app.resultsActiveTab === 'assessment'" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100">
          <%- include('partials/results/assessment') %>
        </div>

        <div x-show="$store.app.resultsActiveTab === 'sample-week'" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100">
          <%- include('partials/results/sample-week') %>
        </div>

        <div x-show="$store.app.resultsActiveTab === 'alignment'" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100">
          <%- include('partials/results/alignment') %>
        </div>

      </main>
    </div>

  </div>

  <%- include('partials/scripts') %>
</body>
</html>
