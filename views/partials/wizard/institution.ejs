<div>
  <div class="mb-8">
    <h1 class="text-2xl font-bold text-slate-900 mb-2">Institution Profile</h1>
    <p class="text-slate-600">Academic settings and requirements for credit-bearing experiential learning.</p>
  </div>

  <!-- Demo Mode Switcher -->
  <div x-show="$store.app.mode === 'demo'" class="mb-6">
    <label class="label">Select Institution</label>
    <div class="flex gap-2">
      <template x-for="inst in $store.app.institutions" :key="inst.id">
        <button
          @click="$store.app.selectedInstitution = inst.id"
          class="px-4 py-2 rounded-lg text-sm font-medium transition-colors"
          :class="$store.app.selectedInstitution === inst.id ? 'bg-primary-600 text-white' : 'bg-slate-100 text-slate-700 hover:bg-slate-200'"
          x-text="inst.name">
        </button>
      </template>
    </div>
  </div>

  <!-- Custom Mode Template Selector -->
  <div x-show="$store.app.mode === 'custom'" class="mb-6">
    <label class="label">Start from template (optional)</label>
    <div class="flex gap-2">
      <template x-for="inst in $store.app.institutions" :key="inst.id">
        <button
          @click="$store.app.useAsTemplate('institution', inst.id)"
          class="px-4 py-2 rounded-lg text-sm font-medium bg-slate-100 text-slate-700 hover:bg-slate-200 transition-colors"
          x-text="'Use ' + inst.name">
        </button>
      </template>
    </div>
  </div>

  <div class="card p-6">
    <!-- Institution Name -->
    <div class="mb-6">
      <label class="label">Institution Name</label>
      <input
        type="text"
        :class="$store.app.mode === 'demo' ? 'input-readonly' : 'input'"
        :readonly="$store.app.mode === 'demo'"
        :value="$store.app.activeInstitution?.name"
        @input="$store.app.mode === 'custom' && ($store.app.customInstitution.name = $event.target.value)">
    </div>

    <!-- Term Settings -->
    <div class="grid sm:grid-cols-3 gap-4 mb-6">
      <div>
        <label class="label">Term Length</label>
        <input
          type="text"
          :class="$store.app.mode === 'demo' ? 'input-readonly' : 'input'"
          :readonly="$store.app.mode === 'demo'"
          :value="$store.app.activeInstitution?.termLengthWeeks + ' weeks'"
          @input="$store.app.mode === 'custom' && ($store.app.customInstitution.termLengthWeeks = parseInt($event.target.value))">
      </div>
      <div>
        <label class="label">Credit Hours</label>
        <input
          type="text"
          :class="$store.app.mode === 'demo' ? 'input-readonly' : 'input'"
          :readonly="$store.app.mode === 'demo'"
          :value="$store.app.activeInstitution?.creditHours + ' credits'"
          @input="$store.app.mode === 'custom' && ($store.app.customInstitution.creditHours = parseInt($event.target.value))">
      </div>
      <div>
        <label class="label">Hours per Week</label>
        <input
          type="text"
          :class="$store.app.mode === 'demo' ? 'input-readonly' : 'input'"
          :readonly="$store.app.mode === 'demo'"
          :value="$store.app.activeInstitution?.hoursPerWeek + ' hours'"
          @input="$store.app.mode === 'custom' && ($store.app.customInstitution.hoursPerWeek = parseInt($event.target.value))">
      </div>
    </div>

    <!-- Learner Settings -->
    <div class="grid sm:grid-cols-3 gap-4 mb-6">
      <div>
        <label class="label">Learner Level</label>
        <input
          type="text"
          :class="$store.app.mode === 'demo' ? 'input-readonly' : 'input'"
          :readonly="$store.app.mode === 'demo'"
          :value="$store.app.activeInstitution?.learnerLevel"
          class="capitalize">
      </div>
      <div>
        <label class="label">Experience Level</label>
        <input
          type="text"
          :class="$store.app.mode === 'demo' ? 'input-readonly' : 'input'"
          :readonly="$store.app.mode === 'demo'"
          :value="$store.app.activeInstitution?.experienceLevel">
      </div>
      <div>
        <label class="label">Assessment Approach</label>
        <input
          type="text"
          :class="$store.app.mode === 'demo' ? 'input-readonly' : 'input'"
          :readonly="$store.app.mode === 'demo'"
          :value="$store.app.activeInstitution?.assessmentApproach">
      </div>
    </div>

    <!-- Learning Outcomes -->
    <div class="mb-6">
      <label class="label">Learning Outcomes Required for Credit</label>
      <textarea
        rows="5"
        :class="$store.app.mode === 'demo' ? 'input-readonly' : 'input'"
        :readonly="$store.app.mode === 'demo'"
        x-text="$store.app.activeInstitution?.learningOutcomes?.map((o, i) => (i + 1) + '. ' + o).join('\n')"></textarea>
    </div>

    <!-- NACE Competencies -->
    <div>
      <label class="label">Required by FieldWork</label>
      <div class="flex flex-wrap gap-2 mb-4">
        <template x-for="comp in $store.app.framework?.naceCompetencies?.required" :key="comp.id">
          <span class="badge badge-green" x-text="comp.name"></span>
        </template>
      </div>

      <label class="label">Additional Competencies (Selected by Institution)</label>
      <div class="flex flex-wrap gap-2">
        <template x-for="compId in $store.app.activeInstitution?.additionalNaceCompetencies" :key="compId">
          <span class="badge badge-blue" x-text="$store.app.getNaceCompetencyName(compId)"></span>
        </template>
        <span x-show="!$store.app.activeInstitution?.additionalNaceCompetencies?.length" class="text-sm text-slate-400 italic">None selected</span>
      </div>
    </div>
  </div>
</div>
